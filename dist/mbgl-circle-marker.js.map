{"version":3,"file":"mbgl-circle-marker.js","sources":["../src/index.js"],"sourcesContent":["'use strict'\n\nclass CircleMarker {\n  constructor(options) {\n    this.options = Object.assign({\n        id: \"\",\n        minzoom: 0,\n        maxzoom: 22,\n        textFont: ['Noto Sans Regular'],\n        textSize: 12,\n        textOffset: [0, 1],\n        textMaxWidth: 12,\n        markers: [],\n      }, options\n    )\n\n    this.geojson = {\n      type: 'FeatureCollection',\n      features: []\n    };\n\n    for (let i = 0; i < options.markers.length; i++) {\n      const props = Object.assign({\n        color: \"#555555\",\n        strokeColor: \"#555555\",\n        circleStrokeWidth: 3,\n        circleRadius: 3,\n        icon: \"\"\n      }, options.markers[i])\n\n      this.geojson.features.push({\n        type: 'Feature',\n        geometry: {\n          type: 'Point',\n          coordinates: options.markers[i].lnglat\n        },\n        properties: props\n      })\n    }\n  }\n\n  addTo(map) {\n    map.on('load', () => {\n      map.addSource(this.options.id, {\n        type: \"geojson\",\n        data: this.geojson,\n      })\n\n      map.addLayer({\n        \"id\": `${this.options.id}-marker`,\n        \"type\": \"circle\",\n        \"minzoom\": this.options.minzoom,\n        \"maxzoom\": this.options.maxzoom,\n        \"source\": this.options.id,\n        \"paint\": {\n          \"circle-radius\": [\"to-number\", [\"get\", \"circleRadius\"]],\n          \"circle-color\": {\"type\": \"identity\", \"property\": \"color\"},\n          \"circle-stroke-width\": [\"to-number\", [\"get\", \"circleStrokeWidth\"]],\n          \"circle-stroke-color\": {\"type\": \"identity\", \"property\": \"strokeColor\"}\n        },\n      });\n\n      map.addLayer({\n        \"id\": `${this.options.id}-label`,\n        \"type\": \"symbol\",\n        \"minzoom\": this.options.minzoom,\n        \"maxzoom\": this.options.maxzoom,\n        \"source\": this.options.id,\n        \"paint\": {\n          \"text-color\": \"#000000\",\n          \"text-halo-color\": \"rgba(255, 255, 255, 1)\",\n          \"text-halo-width\": 2,\n        },\n        \"layout\": {\n          \"text-field\": \"{label}\",\n          \"text-font\": this.options.textFont,\n          \"text-size\": this.options.textSize,\n          \"text-anchor\": \"top\",\n          \"text-max-width\": this.options.textMaxWidth,\n          \"text-offset\": this.options.textOffset,\n          \"text-allow-overlap\": true,\n        }\n      });\n\n      map.addLayer({\n        \"id\": `${this.options.id}-licon`,\n        \"type\": \"symbol\",\n        \"minzoom\": this.options.minzoom,\n        \"maxzoom\": this.options.maxzoom,\n        \"source\": this.options.id,\n        \"layout\": {\n          \"icon-image\": \"{icon}\",\n        }\n      });\n    })\n  }\n}\n\nexport default CircleMarker\n"],"names":["CircleMarker","options","this","Object","assign","textFont","textOffset","geojson","let","i","markers","length","const","props","features","push","geometry","lnglat","addTo","map","on","addSource","id","data","addLayer","minzoom","maxzoom","source","paint","circle-color","circle-stroke-color","layout","text-font","text-size","textSize","text-max-width","textMaxWidth","text-offset"],"mappings":"AAEA,IAAMA,EACJ,SAAYC,GACVC,KAAKD,QAAUE,OAAOC,WACd,WACK,UACA,GACTC,UAAW,8BACD,GACVC,YAAa,EAAG,gBACF,eAEbL,QAGAM,cACG,iCAIR,IAAKC,IAAIC,EAAI,EAAGA,EAAIR,EAAQS,QAAQC,OAAQF,IAAK,CAC/CG,IAAMC,EAAQV,OAAOC,cACZ,sBACM,4BACM,eACL,OACR,IACLH,EAAQS,QAAQD,SAEdF,QAAQO,SAASC,WACd,UACNC,eACQ,oBACOf,EAAQS,QAAQD,GAAGQ,mBAEtBJ,kBAKlBK,eAAMC,cACJA,EAAIC,GAAG,oBACDC,UAAUnB,EAAKD,QAAQqB,SACnB,UACNC,KAAMrB,EAAKK,YAGTiB,aACOtB,EAAKD,0BACN,SACRwB,QAAWvB,EAAKD,QAAQwB,QACxBC,QAAWxB,EAAKD,QAAQyB,QACxBC,OAAUzB,EAAKD,QAAQqB,GACvBM,wBACoB,aAAc,MAAO,iBACvCC,qBAAyB,oBAAwB,gCACzB,aAAc,MAAO,sBAC7CC,4BAAgC,oBAAwB,oBAIxDN,aACOtB,EAAKD,yBACN,SACRwB,QAAWvB,EAAKD,QAAQwB,QACxBC,QAAWxB,EAAKD,QAAQyB,QACxBC,OAAUzB,EAAKD,QAAQqB,GACvBM,oBACgB,4BACK,2CACA,GAErBG,qBACgB,UACdC,YAAa9B,EAAKD,QAAQI,SAC1B4B,YAAa/B,EAAKD,QAAQiC,uBACX,MACfC,iBAAkBjC,EAAKD,QAAQmC,aAC/BC,cAAenC,EAAKD,QAAQK,iCACN,OAItBkB,aACOtB,EAAKD,yBACN,SACRwB,QAAWvB,EAAKD,QAAQwB,QACxBC,QAAWxB,EAAKD,QAAQyB,QACxBC,OAAUzB,EAAKD,QAAQqB,GACvBS,qBACgB"}
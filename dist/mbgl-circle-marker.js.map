{"version":3,"file":"mbgl-circle-marker.js","sources":["../src/index.js"],"sourcesContent":["'use strict'\n\nclass CircleMarker {\n  constructor(options) {\n    this.options = Object.assign({\n        id: \"\",\n        minzoom: 0,\n        maxzoom: 22,\n        textSize: 14,\n        circleRadius: 6,\n        circleStrokeWidth: 6,\n        markers: [],\n      }, options\n    )\n\n    this.geojson = {\n      type: 'FeatureCollection',\n      features: []\n    };\n\n    for (let i = 0; i < options.markers.length; i++) {\n      const props = Object.assign({\n        color: \"#555555\",\n        strokeColor: \"#555555\",\n      }, options.markers[i])\n\n      this.geojson.features.push({\n        type: 'Feature',\n        geometry: {\n          type: 'Point',\n          coordinates: options.markers[i].lnglat\n        },\n        properties: props\n      })\n    }\n  }\n\n  addTo(map) {\n    map.on('load', () => {\n      map.addSource(this.options.id, {\n        type: \"geojson\",\n        data: this.geojson,\n      })\n\n      map.addLayer({\n        \"id\": `${this.options.id}-marker`,\n        \"type\": \"circle\",\n        \"minzoom\": this.options.minzoom,\n        \"maxzoom\": this.options.maxzoom,\n        \"source\": this.options.id,\n        \"paint\": {\n          \"circle-radius\": this.options.circleRadius,\n          \"circle-color\": {\"type\": \"identity\", \"property\": \"color\"},\n          \"circle-stroke-width\": this.options.circleStrokeWidth,\n          \"circle-stroke-color\": {\"type\": \"identity\", \"property\": \"strokeColor\"}\n        },\n      });\n\n      map.addLayer({\n        \"id\": `${this.options.id}-label`,\n        \"type\": \"symbol\",\n        \"minzoom\": this.options.minzoom,\n        \"maxzoom\": this.options.maxzoom,\n        \"source\": this.options.id,\n        \"paint\": {\n          \"text-color\": \"#000000\",\n          \"text-halo-color\": \"rgba(255, 255, 255, 1)\",\n          \"text-halo-width\": 2,\n        },\n        \"layout\": {\n          \"icon-image\": \"airport-15\",\n          \"text-field\": \"{label}\",\n          \"text-font\": this.options.textFont,\n          \"text-size\": this.options.textSize,\n          \"text-anchor\": \"top\",\n          \"text-max-width\": 12,\n          \"text-offset\": [0, 1],\n          \"text-allow-overlap\": false,\n        }\n      });\n    })\n  }\n}\n\nexport default CircleMarker\n"],"names":["CircleMarker","options","this","Object","assign","geojson","let","i","markers","length","const","props","features","push","geometry","lnglat","addTo","map","on","addSource","id","data","addLayer","minzoom","maxzoom","source","paint","circle-radius","circleRadius","circle-color","circle-stroke-width","circleStrokeWidth","circle-stroke-color","layout","text-font","textFont","text-size","textSize","text-offset"],"mappings":"AAEA,IAAMA,EACJ,SAAYC,GACVC,KAAKD,QAAUE,OAAOC,WACd,WACK,UACA,YACC,gBACI,oBACK,cAElBH,QAGAI,cACG,iCAIR,IAAKC,IAAIC,EAAI,EAAGA,EAAIN,EAAQO,QAAQC,OAAQF,IAAK,CAC/CG,IAAMC,EAAQR,OAAOC,cACZ,sBACM,WACZH,EAAQO,QAAQD,SAEdF,QAAQO,SAASC,WACd,UACNC,eACQ,oBACOb,EAAQO,QAAQD,GAAGQ,mBAEtBJ,kBAKlBK,eAAMC,cACJA,EAAIC,GAAG,oBACDC,UAAUjB,EAAKD,QAAQmB,SACnB,UACNC,KAAMnB,EAAKG,YAGTiB,aACOpB,EAAKD,0BACN,SACRsB,QAAWrB,EAAKD,QAAQsB,QACxBC,QAAWtB,EAAKD,QAAQuB,QACxBC,OAAUvB,EAAKD,QAAQmB,GACvBM,OACEC,gBAAiBzB,EAAKD,QAAQ2B,aAC9BC,qBAAyB,oBAAwB,SACjDC,sBAAuB5B,EAAKD,QAAQ8B,kBACpCC,4BAAgC,oBAAwB,oBAIxDV,aACOpB,EAAKD,yBACN,SACRsB,QAAWrB,EAAKD,QAAQsB,QACxBC,QAAWtB,EAAKD,QAAQuB,QACxBC,OAAUvB,EAAKD,QAAQmB,GACvBM,oBACgB,4BACK,2CACA,GAErBO,qBACgB,0BACA,UACdC,YAAahC,EAAKD,QAAQkC,SAC1BC,YAAalC,EAAKD,QAAQoC,uBACX,uBACG,GAClBC,eAAgB,EAAG,yBACG"}